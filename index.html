<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>নিবন্ধন | বিডি মার্কেটিং</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;700&display=swap');
        body { background: #010409; color: white; font-family: 'Hind Siliguri', sans-serif; }
        .input-st { background: #0d1117; border: 1px solid #30363d; border-radius: 12px; padding: 15px; width: 100%; color: white; margin-bottom: 12px; outline: none; }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-6">

    <div class="w-full max-w-md bg-[#0d1117] p-8 rounded-[30px] border border-gray-800 shadow-2xl">
        <div class="text-center mb-6">
            <h1 class="text-2xl font-black text-blue-500">বিডি মার্কেটিং</h1>
            <p class="text-[10px] text-gray-500 uppercase tracking-widest mt-1">অ্যাডমিন কন্ট্রোল সিস্টেম</p>
        </div>

        <div class="bg-blue-600/10 border border-blue-500/20 rounded-xl p-4 mb-6 text-sm">
            <p>বিকাশ: <b>01725780575</b></p>
            <p>নগদ: <b>01763584939</b></p>
        </div>

        <div id="reg-form">
            <input type="text" id="r-name" class="input-st" placeholder="আপনার নাম">
            <input type="number" id="r-age" class="input-st" placeholder="আপনার বয়স">
            <input type="email" id="r-email" class="input-st" placeholder="আপনার জিমেইল">
            <input type="password" id="r-pass" class="input-st" placeholder="পাসওয়ার্ড">
            <button onclick="doSignup()" class="w-full bg-blue-600 p-4 rounded-xl font-bold mt-2">নিবন্ধন করুন</button>
        </div>
    </div>

    <script>
        // আপনার স্ক্রিনশট থেকে নেওয়া কনফিগারেশন
        const firebaseConfig = {
            apiKey: "AIzaSyDRwrekZBZ31ACszDk2EJM_ID6yW7_G9s8",
            authDomain: "bd-marketing-55a81.firebaseapp.com",
            databaseURL: "https://bd-marketing-55a81-default-rtdb.firebaseio.com",
            projectId: "bd-marketing-55a81",
            storageBucket: "bd-marketing-55a81.appspot.com",
            messagingSenderId: "678696512628",
            appId: "1:678696512628:web:edfc22a62f55dad41df521",
            measurementId: "G-3CP5DC4H44"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.database();

        async function doSignup() {
            const name = document.getElementById('r-name').value;
            const age = document.getElementById('r-age').value;
            const email = document.getElementById('r-email').value;
            const pass = document.getElementById('r-pass').value;

            if(!name || !age || !email || !pass) return Swal.fire('ভুল', 'সব পূরণ করুন', 'error');

            try {
                const userCredential = await auth.createUserWithEmailAndPassword(email, pass);
                await userCredential.user.sendEmailVerification();

                const uid = name.replace(/\s+/g, '_');
                masterEngine.initializeUser(uid, name, email, age);

                localStorage.setItem("user_name", name);
                Swal.fire('সফল!', 'জিমেইল ভেরিফাই করে লগইন করুন।', 'success')
                    .then(() => window.location.href = "home.html");
            } catch (e) { Swal.fire('এরর', e.message, 'error'); }
        }
    </script>
    <script src="master-engine.js"></script>
</body>
</html>
